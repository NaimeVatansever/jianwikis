#summary Build Tellurium Reference Document with Docbkx Maven Plugin.
#labels Phase-Design,Phase-Support

= Introduction =

Tellurium 0.7.0 starts to use [http://docbook.sourceforge.net/ docbook] to build the reference document. What is docbook? We quote from http://docbook.sourceforge.net/, "DocBook  is an XML vocabulary that lets you create documents in a presentation-neutral form that captures the logical structure of your content. Using free tools along with the DocBook XSL stylesheets, you can publish your content as HTML pages and PDF files, and in many other formats."

= Maven =

[http://code.google.com/p/docbkx-tools/ docbkx tools] provides a number of tools supporting DocBook in a Maven environment including the [http://docs.codehaus.org/display/MAVENUSER/Docbkx+Maven+Plugin Docbkx Maven Plugin]. The good news is that the Docbkx Maven plugin supports [http://www.docbook.org/tdg5/en/html/docbook.html DocBook version 5.0].

The Maven pom is as follows.

{{{
   <build>
        <plugins>
            <plugin>
                <groupId>com.agilejava.docbkx</groupId>
                <artifactId>docbkx-maven-plugin</artifactId>
                <version>2.0.10-SNAPSHOT</version>
                <executions>
                    <execution>
                        <id>documentation identifier</id>
                        <phase>pre-site</phase>
                        <goals>
                            <goal>generate-pdf</goal>
                        </goals>
                        <configuration>
                            <!-- per execution configuration -->
                            <includes>tellurium-reference.xml</includes>
                            <!--<draftMode>yes</draftMode>-->
                        </configuration>
                    </execution>
                </executions>
                <configuration>
                    <!-- shared configuration -->
                    <generatedSourceDirectory>${project.build.directory}/docbkx/generated</generatedSourceDirectory>
                    <xincludeSupported>true</xincludeSupported>
                    <paperType>A4</paperType>
                    <fop1Extensions>1</fop1Extensions>

                    <foCustomization>src/docbkx-stylesheet/fo/docbook.xsl</foCustomization>

                    <customizationParameters>
                        <!-- additional XSLT parameters-->
                        <parameter>
                            <name>key</name>
                            <value>value</value>
                        </parameter>
                    </customizationParameters>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <pluginRepositories>
        <pluginRepository>
            <id>docbkx.snapshots</id>
            <name>Maven Plugin Snapshots</name>
            <url>http://docbkx-tools.sourceforge.net/snapshots/</url>
            <releases>
                <enabled>false</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </pluginRepository>
    </pluginRepositories>
}}}

The project structure is listed as follows.

{{{
[jfang@Mars tellurium-reference]$ tree .
.
|-- pom.xml
`-- src
    |-- docbkx
    |   |-- media
    |   |   |-- EngineGroupLocatingFlow.png
    |   |   |-- ExportToGroovySmall.png
    |   |   |-- FireFoxUserProfile.png
    |   |-- overview.xml
    |   |-- quickstart.xml
    |   |-- referenceprojects.xml
    |   |-- resources.xml
    |   |-- tellurium-reference.xml
    |   |-- trace.xml
    |   |-- trump.xml
    |   |-- udl.xml
    |   |-- uiobjects.xml
    |   |-- whatsnew.xml
    |   `-- widgets.xml
    `-- docbkx-stylesheet
        `-- fo
            `-- docbook.xsl
}}}
   
= DocBook =

== Book ==

DocBook has two types, i.e., article and book. Tellurium reference uses the book format, which includes the following sections.

{{{
<?xml version="1.0" encoding="UTF-8"?>
<book version="5.0" xmlns="http://docbook.org/ns/docbook"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      xmlns:db="http://docbook.org/ns/docbook" xml:lang="en">
    <info>
        <title>Tellurium Automated Testing Framework</title>
        <subtitle>Reference Documentation</subtitle>
        <pubdate>May 15, 2010</pubdate>
        <releaseinfo>v0.7.0</releaseinfo>

        <authorgroup>
            <author>
                <firstname>Jian</firstname>
                <surname>Fang</surname>
            </author>
            ...
        </authorgroup>

        <copyright>
            <year>2010</year>
            <holder>TelluriumSource</holder>
        </copyright>

        <legalnotice>
            <para>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
                file except in compliance with the License. You may obtain a copy of the License at:
            </para>
            <para>
                http://www.apache.org/licenses/LICENSE-2.0
            </para>
            <para>
                Unless required by applicable law or agreed to in writing, software distributed under the
                License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
                CONDITIONS OF ANY KIND, either express or implied. See the License for the specific
                language governing permissions and limitations under the License.
            </para>
        </legalnotice>

     </info>
}}}

== Chapter ==

Each chapter has the following XML format. For example, the overview.xml is as follows.

{{{

<?xml version="1.0" encoding="UTF-8"?>
<chapter version="5.0" xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:ns5="http://www.w3.org/2000/svg"
         xmlns:ns4="http://www.w3.org/1998/Math/MathML"
         xmlns:ns3="http://www.w3.org/1999/xhtml"
         xmlns:db="http://docbook.org/ns/docbook">

    <title>Overview of Tellurium</title>
    
    <section>
        <title>What is Tellurium</title>
    ...

<chapter>
}}}

Then in the main XML file tellurium-reference.xml, we can include the xml file in the following way.

{{{
    <xi:include href="overview.xml"/>

    <xi:include href="whatsnew.xml"/>

    <xi:include href="quickstart.xml"/>
}}}

Similarly, the appendix is defined as:

{{{
<appendix version="5.0" xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:ns5="http://www.w3.org/2000/svg"
         xmlns:ns4="http://www.w3.org/1998/Math/MathML"
         xmlns:ns3="http://www.w3.org/1999/xhtml"
         xmlns:db="http://docbook.org/ns/docbook">

     <title>FAQs</title>
     ...

</appendix>
}}}

 